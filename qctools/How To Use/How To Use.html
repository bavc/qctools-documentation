<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>
            How To Use This Tool - QCTools Help Guide
        </title>
    </head>
    <body>
        <h1>
            How to Use
        </h1>
        <ul style="list-style-type:none">
            <li>
                <a href="#Install">Install</a>
            </li>
            <li>
                <a href="#Load">Load Video Files</a>
            </li>
            <li>
                <a href="#Preferences">Preferences</a>
            </li>
            <li>
                <a href="#Select">Select Graph Filters</a>
            </li>
            <li>
                <a href="#View">View and Navigate Graphs</a>
            </li>
            <li>
                <a href="#Play">Playback and Visual Analysis</a>
            </li>
            <li>
                <a href="#Report">Create/ Export a Report</a>
            </li>
            <li>
                <a href="#Parts">Parts of the Tool</a>
            </li>
            <li>
                <a href="#Data">Data Analysis Window</a>
            </li>
            <li>
                <a href="#List">List View</a>
            </li>
            <li>
                <a href="#Video">Video Analysis Window</a>
            </li>
        </ul>
        <h2 id="Install">
            Install
        </h2>
        <p>
            Go to <a href="http://bavc.org/qctools">http://bavc.org/qctools</a> and download QCTools for your operating system (currently Windows, Mac OS X, and many Linux-based operating systems are supported). Initiate the install by double-clicking the icon, and follow the steps. New releases of QCTools will be periodically available at BAVC's <a href="http://www.bavc.org/qctools">QCTools project website</a> as well as the releases tab on the <a href="http://github.com/bavc/qctools/releases">QCTools github page</a>.
        </p>
        <h2 id="Preferences">
            Preferences
        </h2>
        <p>
            QCTools provides a Preferences window to configure settings for running QCTools.
        </p>
        <h3>Filters</h3>
        <p>QCTool's analysis methods depend on filters from FFmpeg's libavfilter library. Currently this includes: <a href="http://ffmpeg.org/ffmpeg-filters.html#signalstats">signalstats</a> (initially created as part the QCTools project), <a href="http://ffmpeg.org/ffmpeg-filters.html#cropdetect">cropdetect</a>, <a href="http://ffmpeg.org/ffmpeg-filters.html#psnr">PSNR</a>, <a href="http://ffmpeg.org/ffmpeg-filters.html#astats">astats</a>, and <a href="http://ffmpeg.org/ffmpeg-filters.html#ebur128">EBU R.128</a>.
        </p>
        <table border='1'>
            <tr>
                <th>filter name</th>
                <th>track type</th>
                <th>application in QCTools</th>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#signalstats">signalstats</a></td>
                <td>video</td>
                <td>The signalstats analysis filter generates data to plot statistics on video signal levels, frame-to-frame differences, saturation and hue averages, and quantifications of visual patterns and errors. It is highly recommended to enable this fitler.</td>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#cropdetect">cropdetect</a></td>
                <td>video</td>
                <td>The cropdetect filter is used to determine how many columns and rows of nearly-black pixels border the visual image of the frame. The filter can detect changes in framing, letterboxing, pillarboxing, and adjustments to the aperature of the image.</td>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#psnr">PSNR</a></td>
                <td>video</td>
                <td>The PSNR filter is used in QCTools specifically to generate a comparison between the two fields of the frame. The resulting data documents how different the fields are (which can find head-clogs or other videotape playback errors).</td>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#ssim">SSIM</a></td>
                <td>video</td>
                <td>The SSIM filter is used in QCTools specifically to generate a comparison between the two fields of the frame. The resulting data documents how different the fields are (which can find head-clogs or other videotape playback errors). It is similar to PSNR but usually a different visual comparison algorithm.</td>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#astats">astats</a></td>
                <td>audio</td>
                <td>The astats filter compiles statistics on audio data for small units of time, including maximum and minimum audio levels, DC Offset, the amount of consecutive audio sample differences, and RMS data.</td>
            </tr>
            <tr>
                <td><a href="http://ffmpeg.org/ffmpeg-filters.html#ebur128">EBU R.128</a></td>
                <td>audio</td>
                <td>The EBU R.128 filter provides data on the perceived loudness of audio volume.</td>
            </tr>
        </table>
        <p>Enabling all filters naturally provides more data, but results in a slower analysis and large files. The EBU R.128 values represent perceived volume whereas the astats filters include metrics on actual volume (so the use of EBU R128 may not be considered essential if astats is in use).</p>
        <h3>Tracks</h3>
        <p>The 'Tracks' Preference pane allows the user to set if they would like to analyze only the first track or all tracks of video and audio. Setting QCTools to analyze only the first track will result in a faster analyze but the other tracks would be ignored.</p>
        <h2 id="Load">
            Load Video Files
        </h2>
        <p>
            QCTools can currently accomodate several video file types including QuickTime, MXF, AVI, Matroska, MP4, and many other audiovisual file formats. Once the QCTools application is open you may identify selected video files for QCTools analysis in three ways:
        </p>
        <ol>
            <li>Simply drag a video file (or files) into the QCTools window. Note that you may import multiple files at once into the tool, though depending on the number and size of the files, processing speed may be affected.
            </li>
            <li>Double click the folder icon on the upper left. This launches a window from which you can browse and select video files.
            </li>
            <li>Navigating to File--&gt;Open.
            </li>
        </ol>
        <p>
            As files are opened QCTools will begin immediately processing them. This involves creating thumbnails, decoding audiovisual data, and analyzing that data through FFmpeg's signalstats filter.
        </p>
        <h2 id="Select">
            Select Graph Filters
        </h2>
        <p>
            By clicking the graph checkboxes you can select particular audiovisual metrics that you wish to analyze and display. You may make these selections before uploading your video or at any time after the QCTools analysis has been done and the graph display will update dynamically. As a default, 'Y values', 'U values', 'V values', 'Diffs', and 'Sat' (saturation) are selected. To begin, you may also want to select the <b>Temporal Outliers</b> (tout) Graph Filter. This will detect any large discrepancies between pixels and can provide an initial, high-level overview of potential errors.
        </p>
        <p>
            For descriptions of each Filter and how to read graph values, please see the Help Section, denoted by the '?' icon in the toolbox portion of the application.
        </p>
        <h2>
            <a id="View" name="View">View and Navigate Graphs</a>
        </h2>
        <p>
            Graphs display on the top portion of the screen, corresponding video thumbnails show below. The video frames may be navigated via the next, previous, or playback buttons; the frame and time for the particular selection will be displayed. Clicking and dragging your cursor over a portion of the graph will cause the thumbnails below to update accordingly. You may also double click a specific thumbnail and the playback window will appear displaying the image and with a variety of analytical playback filters.
        </p>
        <p>
            Scrubbing your cursor over a particular point on a graph will reveal the corresponding thumbnails in the thumbnail bar along with the frame number and the timestamp of the particular place in the video you have navigated to.
        </p>
        <p>
            You may also use the '+' and '-' icons in the tool box section of the application to zoom in/out, giving you a more or less detailed view of the graph displays, over a specific timespan of the uploaded video.
        </p>
        <p>
            You can also 'play' the window within the graph view. When playing the graph's cursor which shows the currently selected frame will scroll to the right while the corresponding thumbnails update in the thumbnail bar below.
        </p>
        <p>
            Some helpful <strong>keyboard shortcuts</strong> you may want to use are:
        </p>
        <ul>
            <li>'j' - To rewind
            </li>
            <li>'k' - To pause
            </li>
            <li>'l' - To Fast Forward
            </li>
            <li>'f' - To enlarge the window to full screen
            </li>
            <li>space bar - Toggle between play and pause
            </li>
            <li>left - Select the previous frame
            </li>
            <li>right - Select the next frame
            </li>
        </ul>
        <h2 id="Play">
            Playback and Visual Analysis
        </h2>
        <p>
            By clicking on a thumbail, you can open the preview window. The preview window serves as a playback environment that allows spot checking and manual video alaysis. The preview window contains two playback windows that can be set to various selections; the filters allow the video to be processed in one of many ways which may help make particular issues more discernable. See the <b>Playback Filters</b> page for more details on these playback filters.
        </p>
        <h2 id="Report">
            Create/Export a Report
        </h2>
        <p>
            When an analysis (which may be time consuming, depending on the length of the file) is complete the analysis data may then be exported to a compressed XML file for future use. At a later point, the video may be reviewed again simply by opening the XML file--using the <b>Import</b> menu, or dragging and dropping the XML into QCTools--instead of having to reload/ reanalyze the video file itself; this process will take considerably less time. Additionally, this file may be opened in other environments such as standard spreadsheet or database applications.<br />
            QCTools also can export analytical metadata per frame in a <a href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> document but the compressed <a href="http://en.wikipedia.org/wiki/XML">XML</a> report is recommended since it can be reloaded into QCTools. Please see 'Data Format' tab for more information on the XML file compression and resulting file.<br />
            To <b>Export</b>:
        </p>
        <ul>
            <li>Navigate to: Export--&gt;To .qctools.xml.gz.../CSV, etc.
            </li>
            <li>Click the 'CSV' icon in the toolbox section of the application.
            </li>
        </ul>
        <p>
            Both options will prompt you to name your file and select a select a location.<br />
            To <strong>Import</strong>:
        </p>
        <ul>
            <li>Navigate to: Import --&gt; From .qctools.xml.gz...
            </li>
            <li>Drag and drop file(s) into main QCTools window
            </li>
        </ul>
        <h2 id="Parts">
            Parts of the Tool
        </h2>
        <h3 style="color:blue" id="Data">
            Graph Window:
        </h3>
        <p>
            This view displays the filename, graph selections, X-Axis value selector, and the frame navigator buttons.<br />
            <br />
            <img src="Slide1.jpg" alt="Data Analysis Window" /><br />
            <br />
            Descriptions of a graphs are reveals as tooltips when hovering your cursor over the graph checkboxes:<br />
            <br />
            <img src="Slide4.jpg" alt="filter description" /><br />
            <br />
        </p>
        <h3 style="color:blue" id="List">
            Table View:
        </h3>
        <p>
            The Table View enables you to view the progress of your file download, plus associated metadata:<br />
            <br />
            <img src="metadatascreen.jpg" alt="List View" /><br />
            <br />
        </p>
        <p>
            In addition to technical metadata about the file (duration, frame rate, file size, etc.) the List View also displays more detailed statistics:
        </p>
        <table border="1" summary="list of columns and descriptions of the table view">
            <tbody>
                <tr>
                    <th>
                        Column Name
                    </th>
                    <th>
                        Description
                    </th>
                </tr>
                <tr>
                    <td>
                        Yav
                    </td>
                    <td>
                        The average of the Y values
                    </td>
                </tr>
                <tr>
                    <td>
                        Yrang
                    </td>
                    <td>
                        The average of the YHIGH and YLOW values, which indicates the overall range of contrast
                    </td>
                </tr>
                <tr>
                    <td>
                        Uav
                    </td>
                    <td>
                        The average of the U values
                    </td>
                </tr>
                <tr>
                    <td>
                        Vav
                    </td>
                    <td>
                        The average of the V values
                    </td>
                </tr>
                <tr>
                    <td>
                        TOUTav
                    </td>
                    <td>
                        The average of the TOUT values
                    </td>
                </tr>
                <tr>
                    <td>
                        SATb
                    </td>
                    <td>
                        The number of frames where the maximum saturation is over 88.7, which would indicate levels outside of the broadcast range
                    </td>
                </tr>
                <tr>
                    <td>
                        SATi
                    </td>
                    <td>
                        The number of frames where the maximum saturation is over 118.2, which would indicate levels outside the legal YUV values
                    </td>
                </tr>
                <tr>
                    <td>
                        BRNGav
                    </td>
                    <td>
                        The percentage of frames with a BRNG value of more than zero
                    </td>
                </tr>
                <tr>
                    <td>
                        BRNGc
                    </td>
                    <td>
                        The number of frames with a BRNG value greater than zero
                    </td>
                </tr>
                <tr>
                    <td>
                        MSEfY
                    </td>
                    <td>
                        The number of frames with an MSEfY value over 1000
                    </td>
                </tr>
            </tbody>
        </table>
        <h3 style="color:blue" id="Video">
            Video Analysis Window:
        </h3>
        <p>
            <img src="Slide2.jpg" alt="Video Analysis Window" /><br />
            <br />
            With the available views:<br />
            <br />
            <img src="Slide3.jpg" alt="Views" /><br />
            <br />
            Many playback filters will use contextual options to tweak them, please review the Playback Filters section of the help documentation for more details.
        </p>
    </body>
</html>
